<div class="row my-3">
  <% events.each do |event| %>
    <div class="col-sm-12 col-md-6 col-xl-4 mb-3" data-fb-event-id="<%= event['id'] %>">
      <form action="/fb/events" remote="true">
        <%= link_to event do %>
          <div class="card-trip">
            <div class="flex-row d-flex m-4 justify-content-center">
              <%= link_to "remove", root_path, class: 'mr-5 btn btn-danger' %>
              <input type="submit" value="save", class="btn btn-primary">
            </div>
            <% placeholder_url = "https://images.unsplash.com/photo-1514525253161-7a46d19cd819?ixlib=rb-1.2.1&auto=format&fit=crop&w=2467&q=80" %>
            <%= image_tag event['cover']['source'].presence ? event['cover']['source'] : placeholder_url %>
            <div class="card-trip-infos">
              <div class="d-flex justify-content-between">
                <div class="flex-column">
                  <h2><%= event['name'] %></h2>
                  <input type="hidden" value="<%= event['name'] %>" name="event['name']">
                  <h6 class='mt-1'><%= event['place']['name'] %></h6>
                </div>
                <div class="flex-column">
                  <h5 class='start-time-day'><%= DateTime.parse(event['start_time']).day %></h5>
                  <p class='start-time-red-month'><%= DateTime.parse(event['start_time']).strftime('%b').upcase %></p>
                </div>
              </div>

              <div class="form-check" >
                <% Category.all.each do |category| %>
                  <div style="background-color: <%= category.color_hex %>;">
                    <input class="form-check-input" type="checkbox" name="event[category_ids][]" value="<%= category.id %>" id="tag-<%= category.name %>" >
                    <label class="form-check-label" for="tag-<%= category.name %>">
                      <%= category.name %>
                    </label>
                  </div>
                <% end %>
              </div>

              <div class="d-flex flex-column justify-content-end align-items-center mt-2">
                <% if event['place']['location'].present? %>
                  <div class="event-info d-flex flex-row">
                    <p><%=  event['place']['location']['city'] %> |
                    <%=  event['place']['location']['state'] %></p>
                  </div>
                  <div class="event-info d-flex flex-row">
                    <p><%=  event['place']['location']['latitude'] %> | <%=  event['place']['location']['longitude'] %></p>
                  </div>
                <% end %>
                <p style="width: 75%;"><%= truncate(event['description'], length: 80) %></p>
              </div>
            </div>
          </div>
        <% end %>
      </form>
    </div>
  <% end %>
</div>
